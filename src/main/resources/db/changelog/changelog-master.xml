<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
  xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
  xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd
                      http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

  <changeSet id="1" author="noguez">
    <sql> 
      CREATE TABLE roles
      (
          role_id UUID NOT NULL,
          role_name VARCHAR(255) NOT NULL,
          PRIMARY KEY (role_id)
      );

      CREATE TABLE users (
        user_id UUID,
        user_login VARCHAR(255),
        user_password VARCHAR(255),
        user_email VARCHAR(255),
        user_role INTEGER,
        created_at DATE,
        updated_at DATE,
        PRIMARY KEY (user_id)
      );

      CREATE TABLE user_role (
        user_role_id UUID NOT NULL,
        user_id UUID,
        role_id UUID,
        PRIMARY KEY (user_role_id),
        FOREIGN KEY (user_id) REFERENCES users(user_id),
        FOREIGN KEY (role_id) REFERENCES roles(role_id)
      );

      CREATE TABLE update_user_logs (
        update_id UUID NOT NULL,
        user_id UUID NOT NULL,
        updated_at DATE,
        PRIMARY KEY (update_id),
        FOREIGN KEY (user_id) REFERENCES users(user_id)
      );

      CREATE TABLE login_user_logs (
        login_id UUID NOT NULL,
        user_id UUID NOT NULL,
        updated_at DATE,
        PRIMARY KEY (login_id),
        FOREIGN KEY (user_id) REFERENCES users(user_id)
      );
      
      CREATE TABLE jobs (
        job_id UUID,
        job_title VARCHAR(255),
        job_description VARCHAR(255),
        job_requirements VARCHAR(255),
        job_status VARCHAR(50),
        created_at DATE,
        updated_at DATE,
        PRIMARY KEY (job_id)
      );
      
      CREATE TABLE skills (
        skill_id UUID,
        skill_title VARCHAR(255),
        skill_description VARCHAR(255),
        created_at DATE,
        updated_at DATE,
        PRIMARY KEY (skill_id)
      );
      
      CREATE TABLE skill_user (
        skill_user_id UUID PRIMARY KEY,
        skill_id UUID,
        user_id UUID,
        experience_level VARCHAR(50),
        last_used_date DATE,
        certification VARCHAR(255),
        FOREIGN KEY (user_id) REFERENCES users(user_id),
        FOREIGN KEY (skill_id) REFERENCES skills(skill_id)
      );
      
      CREATE TABLE user_job (
        user_job_id UUID PRIMARY KEY,
        user_id UUID,
        job_id UUID,
        application_status VARCHAR(50),
        application_date DATE,
        FOREIGN KEY (user_id) REFERENCES users(user_id),
        FOREIGN KEY (job_id) REFERENCES jobs(job_id)
      );
      
      
    </sql>
  </changeSet>
</databaseChangeLog>